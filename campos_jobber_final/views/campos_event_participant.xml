<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2016 Stein & Gabelgaard ApS
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->

<openerp>
<data>

    <record model="ir.ui.view" id="campos_event_participant_staff_form_view">
        <field name="name">campos.event.participant.form (in campos_jobber_final)</field>
        <field name="model">campos.event.participant</field>
        <field name="inherit_id" ref="campos_event.staff_event_registration_participant_form"/>
        <field name="arch" type="xml">
        	
        	<field name="registration_id" position="replace"/>
            <page name="agreements" position="before">
            	<page name="finalreg" string="Final signup">
            		 
            		<group>
            			<div attrs="{'invisible': [('birthdate', '!=', False)]}">
            			<p>You need to fill in your Birthdate to get access to the final camp signup</p>
            			</div>
            			<div attrs="{'invisible': [('ckr_needed', '=', False)]}">
            			<p>You need to request a CKR Attest to get access to the final camp signup</p>
            			
            			</div>
            			<field name="signup_state" attrs="{'invisible': ['|',('ckr_needed', '=', True),('birthdate','=', False)]}"/>
            		</group>
            		<notebook attrs="{'invisible': [('signup_state', 'not in', ['oncamp','dayjobber'])]}">
            			<page string="Camp Days">
            				<group col="5">
            				<button name="check_all_precamp_days" 
											type="object"    
											icon="fa-check-square-o"
											string="Check all Pre Camp" class = "oe_edit_only oe_inline oe_stat_button"/>
							<button name="check_precamp_wed_fri" 
											type="object"
											icon="fa-check-square-o"    
											string="Pre Camp Wed-Friday" class = "oe_edit_only oe_inline oe_stat_button"/>
            					<button name="check_all_maincamp_days" 
											type="object"    
											icon="fa-check-square-o"
											string="Check all Main Camp" class = "oe_edit_only oe_inline oe_stat_button"/>
							 
							<!-- 
							<button name="check_all_second_half_days" 
											type="object"
											icon="fa-check-square-o"    
											string="Wed- to Sunday" class = "oe_edit_only oe_inline oe_stat_button"/>
							 -->				
							<button name="check_all_postcamp_days" 
											type="object"    
											icon="fa-check-square-o"
											string="Check all Post Camp" class = "oe_edit_only oe_inline oe_stat_button"/>
            				<button name="uncheck_all_days" 
											type="object"    
											icon="fa-square-o"
											string="Un-check all days" class = "oe_edit_only oe_inline oe_stat_button"/>
            				</group>
            				 
							<field colspan="2" name="camp_day_ids" widget="one2many_list" nolabel="1">
								<tree delete="false" create="false" editable="bottom">
									<field name="the_date" readonly="1"/>
									<field name="day_id" invisible="1"/>
									<field name="will_participate"/>
								</tree>
							</field>
            			</page>
            			<page string="Accomodation" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}">
							<field name="accomodation_ids" context="{'default_participant_id': id}">
								<tree editable="bottom">
									<field name="date_from"/>
									<field name="date_to"/>
									<field name="accom_type_id" options="{'no_create': True, 'no_open': True}"/>
									<field name="group_sel" invisible="1" />
									<field name="registration_id" string="Group" attrs="{'readonly': [('group_sel', '=', False)], 'required': [('group_sel', '=', True)]}" options="{'no_create': True, 'no_open': True}" context="{'tree_view_ref': 'campos_jobber_final.registration_search_tree_view',
																																																													 'show_organization': 1}"/>
									<field name="state" readonly="1"/>
								</tree>
							</field>
						</page>
            			<page string="Catering" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}">
							<field name="canteen_ids" context="{'default_participant_id': id}">
								<tree editable="bottom">
									<field name="date_from"/>
									<field name="date_to"/>
									<field name="eat_at"/>
									<!-- 
									<field name="canteen_id" attrs="{'readonly': [('eat_at', '!=', 'canteen')], 'required': [('eat_at', '=', 'canteen')]}" options="{'no_create': True, 'no_open': True}"/>
									 -->
									<field name="registration_id" string="Group" attrs="{'readonly': [('eat_at', '!=', 'group')], 'required': [('eat_at', '=', 'group')]}" options="{'no_create': True, 'no_open': True}" context="{'tree_view_ref': 'campos_jobber_final.registration_search_tree_view',
																																																								    'show_organization': 1}"/>
									<field name="state" readonly="1"/>
								</tree>
							</field>
						
            			
            			</page>
            			<page string="Transportation" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}">
            				<group>
            					<field name="transport_to_camp"/>
            					<field name="transport_from_camp"/>
            				</group>
            			</page>
						<page string="Special needs" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}" >
									<group>
										<field name="need_ids" widget="many2many_tags" options="{'no_create': True}" domain="[('for_staff', '=', True)]"/>
										<field name="other_need"/>
										<field name="other_need_description" attrs="{'invisible': [('other_need', '=', False)]}"/>
										<field name="other_need_update_date" invisible="1"/>
									</group>
						</page>
						<page string="Payment" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}">
									<group>
										<field name="partner_id" invisible="1" />
										<field name="paybygroup" />
										<field name="registration_id" string="Group" attrs="{'readonly': [('payreq_state', '=', 'approved')], 'invisible': [('paybygroup', '=', False)]}" options="{'no_open': True, 'no_create': True}" context="{'search_default_organization_id': reg_organization_id,
																																																												   'tree_view_ref': 'campos_jobber_final.registration_search_tree_view',
																																																												   'show_organization': 1}" domain="[('state', 'not in', ['cancel','deregistered'])]"/>
										<field name="payreq_state" attrs="{'invisible': [('paybygroup', '=', False)]}" readonly="1"/>
										<field name="payreq_approved_date" attrs="{'invisible': [('paybygroup', '=', False)]}" readonly="1"/>
										<field name="payreq_approved_user_id" attrs="{'invisible': [('paybygroup', '=', False)]}" readonly="1"/>
						      		</group>
						 </page>
						 <page string="Children Island" attrs="{'invisible': [('signup_state', 'not in', ['oncamp','dayjobber'])]}">
						 	<group>
						 		<field name="exp_child_qu" />
						 	</group>
						 </page>
            		</notebook>		
            	</page>
            </page>
            <field name="birthdate" position="replace">
            	<field name="birthdate" string="Fødselsdato" placeholder="dd/mm/åååå" options="{'datepicker': {'yearRange': 'c-100:c+0'}}"
            		attrs="{'required': [('signup_state', 'in', ['oncamp','dayjobber'])]}"/>
            	<field name="ckr_needed" invisible="1"/>
            </field>
            <field name="country_id" position="replace">
            	<field name="country_id" placeholder="Country" class="oe_no_button" options="{'no_open': True, 'no_create': True}" attrs="{'readonly': [('use_parent_address','=',True)]}" required="1"/>
            </field>
            <field name="street" position="replace">
            		<field name="street" placeholder="Street..." attrs="{'readonly': [('use_parent_address','=',True)], 'required': ['|',('transport_to_camp','=', True),('transport_from_camp','=', True)]}"/>
			</field>
			<field name="zip" position="replace">
                    <field name="zip" placeholder="ZIP" style="width: 27%" attrs="{'readonly': [('use_parent_address','=',True)], 'required': ['|',('transport_to_camp','=', True),('transport_from_camp','=', True)]}"/>
            </field>
            <field name="city" position="replace">
                     <field name="city" placeholder="City" style="width: 70%" attrs="{'readonly': [('use_parent_address','=',True)], 'required': ['|',('transport_to_camp','=', True),('transport_from_camp','=', True)]}"/>
            </field>
            
        </field>
    </record>


	<!-- Admin View -->
	
	
	
	<record model="ir.ui.view" id="view_event_registration_participant_form">
        <field name="name">campos.event.participant.form (in campos_jobber_final)</field>
        <field name="model">campos.event.participant</field>
        <field name="inherit_id" ref="campos_event.view_event_registration_participant_form"/>
        <field name="arch" type="xml">
        	
        	<field name="registration_id" position="replace"/>
            <page name="agreements" position="before">
            	<page name="finalreg" string="Final signup">
            		 
            		<group>
            			<div attrs="{'invisible': [('birthdate', '!=', False)]}">
            			<p>You need to fill in your Birthdate to get access to the final camp signup</p>
            			</div>
            			<div attrs="{'invisible': [('ckr_needed', '=', False)]}">
            			<p>You need to request a CKR Attest to get access to the final camp signup</p>
            			
            			</div>
            			<field name="signup_state" attrs="{'invisible': ['|',('ckr_needed', '=', True),('birthdate','=', False)]}"/>
            		</group>
            		<notebook attrs="{'invisible': [('signup_state', 'not in', ['oncamp','dayjobber'])]}">
            			<page string="Camp Days">
            				<group col="5">
            				<button name="check_all_precamp_days" 
											type="object"    
											icon="fa-check-square-o"
											string="Check all Pre Camp" class = "oe_edit_only oe_inline oe_stat_button"/>
							<button name="check_precamp_wed_fri" 
											type="object"
											icon="fa-check-square-o"    
											string="Pre Camp Wed-Friday" class = "oe_edit_only oe_inline oe_stat_button"/>
            					<button name="check_all_maincamp_days" 
											type="object"    
											icon="fa-check-square-o"
											string="Check all Main Camp" class = "oe_edit_only oe_inline oe_stat_button"/>
							 
							<!-- 
							<button name="check_all_second_half_days" 
											type="object"
											icon="fa-check-square-o"    
											string="Wed- to Sunday" class = "oe_edit_only oe_inline oe_stat_button"/>
							 -->				
							<button name="check_all_postcamp_days" 
											type="object"    
											icon="fa-check-square-o"
											string="Check all Post Camp" class = "oe_edit_only oe_inline oe_stat_button"/>
            				<button name="uncheck_all_days" 
											type="object"    
											icon="fa-square-o"
											string="Un-check all days" class = "oe_edit_only oe_inline oe_stat_button"/>
            				</group>
            				 
							<field colspan="2" name="camp_day_ids" widget="one2many_list" nolabel="1">
								<tree delete="false" create="false" editable="bottom">
									<field name="the_date" readonly="1"/>
									<field name="day_id" invisible="1"/>
									<field name="will_participate"/>
								</tree>
							</field>
            			</page>
            			<page string="Accomodation" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}">
							<field name="accomodation_ids" context="{'default_participant_id': id}">
								<tree editable="bottom">
									<field name="date_from"/>
									<field name="date_to"/>
									<field name="accom_type_id" options="{'no_create': True, 'no_open': True}"/>
									<field name="group_sel" invisible="1" />
									<field name="registration_id" string="Group" attrs="{'readonly': [('group_sel', '=', False)], 'required': [('group_sel', '=', True)]}" options="{'no_create': True, 'no_open': True}" context="{'tree_view_ref': 'campos_jobber_final.registration_search_tree_view',
																																																													 'show_organization': 1}"/>
									<field name="state" readonly="1"/>
								</tree>
							</field>
						</page>
            			<page string="Catering" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}">
							<field name="canteen_ids" context="{'default_participant_id': id}">
								<tree editable="bottom">
									<field name="date_from"/>
									<field name="date_to"/>
									<field name="eat_at"/>
									<!-- 
									<field name="canteen_id" attrs="{'readonly': [('eat_at', '!=', 'canteen')], 'required': [('eat_at', '=', 'canteen')]}" options="{'no_create': True, 'no_open': True}"/>
									 -->
									<field name="registration_id" string="Group" attrs="{'readonly': [('eat_at', '!=', 'group')], 'required': [('eat_at', '=', 'group')]}" options="{'no_create': True, 'no_open': True}" context="{'tree_view_ref': 'campos_jobber_final.registration_search_tree_view',
																																																								    'show_organization': 1}"/>
									<field name="state" readonly="1"/>
								</tree>
							</field>
						
            			
            			</page>
            			<page string="Transportation" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}">
            				<group>
            					<field name="transport_to_camp"/>
            					<field name="transport_from_camp"/>
            				</group>
            			</page>
						<page string="Special needs" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}" >
									<group>
										<field name="need_ids" widget="many2many_tags" options="{'no_create': True}" domain="[('for_staff', '=', True)]"/>
										<field name="other_need"/>
										<field name="other_need_description" attrs="{'invisible': [('other_need', '=', False)]}"/>
										<field name="other_need_update_date" invisible="1"/>
									</group>
						</page>
						<page string="Payment" attrs="{'invisible': [('signup_state', '!=', 'oncamp')]}">
									<group>
										<field name="paybygroup" />
										<field name="registration_id" string="Group" attrs="{'readonly': [('payreq_state', '=', 'approved')], 'invisible': [('paybygroup', '=', False)]}" context="{'search_default_organization_id': reg_organization_id,
																																																	'tree_view_ref': 'campos_jobber_final.registration_search_tree_view',
																																																	'show_organization': 1}"/>
										<field name="payreq_state" attrs="{'invisible': [('paybygroup', '=', False)]}" readonly="1"/>
										<field name="payreq_approved_date" attrs="{'invisible': [('paybygroup', '=', False)]}" readonly="1"/>
										<field name="payreq_approved_user_id" attrs="{'invisible': [('paybygroup', '=', False)]}" readonly="1"/>
						      		</group>
						 </page>
						 <page string="Children Island" attrs="{'invisible': [('signup_state', 'not in', ['oncamp','dayjobber'])]}">
						 	<group>
						 		<field name="exp_child_qu" />
						 	</group>
						 </page>
            		</notebook>		
            	</page>
            </page>
            <field name="birthdate" position="replace">
            	<field name="birthdate" string="Fødselsdato" placeholder="dd/mm/åååå" options="{'datepicker': {'yearRange': 'c-100:c+0'}}"
            		attrs="{'required': [('signup_state', 'in', ['oncamp','dayjobber'])]}"/>
            	<field name="ckr_needed" invisible="1"/>
            </field>
            <field name="country_id" position="replace">
            	<field name="country_id" placeholder="Country" class="oe_no_button" options="{'no_open': True, 'no_create': True}" attrs="{'readonly': [('use_parent_address','=',True)]}" required="1"/>
            </field>
            <field name="street" position="replace">
            		<field name="street" placeholder="Street..." attrs="{'readonly': [('use_parent_address','=',True)], 'required': ['|',('transport_to_camp','=', True),('transport_from_camp','=', True)]}"/>
			</field>
			<field name="zip" position="replace">
                    <field name="zip" placeholder="ZIP" style="width: 27%" attrs="{'readonly': [('use_parent_address','=',True)], 'required': ['|',('transport_to_camp','=', True),('transport_from_camp','=', True)]}"/>
            </field>
            <field name="city" position="replace">
                     <field name="city" placeholder="City" style="width: 70%" attrs="{'readonly': [('use_parent_address','=',True)], 'required': ['|',('transport_to_camp','=', True),('transport_from_camp','=', True)]}"/>
            </field>
            
        </field>
    </record>


</data>
</openerp>
